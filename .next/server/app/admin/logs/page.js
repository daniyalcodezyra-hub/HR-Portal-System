(()=>{var e={};e.id=288,e.ids=[288],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},23312:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\computer lab\\\\Pictures\\\\HR-Portal-System-main\\\\HR-Portal-System-main\\\\app\\\\admin\\\\logs\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\computer lab\\Pictures\\HR-Portal-System-main\\HR-Portal-System-main\\app\\admin\\logs\\page.tsx","default")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32145:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>d,routeModule:()=>x,tree:()=>o});var r=s(70260),a=s(28203),n=s(25155),i=s.n(n),l=s(67292),c={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let o={children:["",{children:["admin",{children:["logs",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,23312)),"C:\\Users\\computer lab\\Pictures\\HR-Portal-System-main\\HR-Portal-System-main\\app\\admin\\logs\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,54899)),"C:\\Users\\computer lab\\Pictures\\HR-Portal-System-main\\HR-Portal-System-main\\app\\admin\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,19611)),"C:\\Users\\computer lab\\Pictures\\HR-Portal-System-main\\HR-Portal-System-main\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,61129)),"C:\\Users\\computer lab\\Pictures\\HR-Portal-System-main\\HR-Portal-System-main\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["C:\\Users\\computer lab\\Pictures\\HR-Portal-System-main\\HR-Portal-System-main\\app\\admin\\logs\\page.tsx"],p={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/logs/page",pathname:"/admin/logs",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},33873:e=>{"use strict";e.exports=require("path")},51031:(e,t,s)=>{Promise.resolve().then(s.bind(s,23312))},55759:(e,t,s)=>{Promise.resolve().then(s.bind(s,60012))},60012:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(45512),a=s(58009),n=s(86235),i=s(16873),l=s(41384),c=s(70399);let o=()=>{let[e,t]=(0,a.useState)([]),[s,o]=(0,a.useState)([]),[d,p]=(0,a.useState)(!0),[x,m]=(0,a.useState)(""),[u,h]=(0,a.useState)(new Date().getMonth()),[f,b]=(0,a.useState)(new Date().getFullYear()),g=async()=>{p(!0);try{let[e,s]=await Promise.all([fetch("/api/attendance"),fetch("/api/users")]),r=await e.json(),a=await s.json();e.ok&&t(r||[]),s.ok&&o(a||[])}catch(e){console.error("Error fetching data:",e)}finally{p(!1)}};(0,a.useEffect)(()=>{g()},[]);let j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],v=e=>{if(!e||"-"===e||"NONE"===e)return"-";if("string"==typeof e&&e.includes("T"))try{let t=new Date(e);if(isNaN(t.getTime()))return e;return t.toLocaleTimeString("en-PK",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch(e){}return e},y=e.filter(e=>{let t=new Date(e.date);return t.getMonth()===u&&t.getFullYear()===f}),k=s.map(e=>{let t=y.filter(t=>t.user?._id===e._id||t.user===e._id),s=t.filter(e=>"present"===e.status).length,r=t.filter(e=>"late"===e.status).length,a=t.filter(e=>"leave"===e.status).length,n=26-(s+r+a);return{...e,present:s,late:r,leave:a,absent:n>0?n:0,logs:t}}).filter(e=>e.full_name?.toLowerCase().includes(x.toLowerCase()));return d?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,r.jsx)(n.A,{className:"animate-spin text-black",size:48}),(0,r.jsx)("p",{className:"text-zinc-400 font-black uppercase text-[10px] tracking-[0.4em]",children:"Aggregating Monthly Intelligence..."})]})}):(0,r.jsxs)("div",{className:"space-y-8 pb-10",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 bg-zinc-50/50 p-8 rounded-[3rem] border border-zinc-100",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-4xl font-black text-black tracking-tighter leading-none mb-2",children:"Monthly Intelligence"}),(0,r.jsx)("p",{className:"text-zinc-500 font-bold uppercase text-[10px] tracking-[0.2em]",children:"Aggregated Workforce Performance Data"})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-4 items-center",children:(0,r.jsx)("div",{className:"flex bg-white rounded-2xl border border-zinc-200 p-1",children:j.map((e,t)=>(0,r.jsx)("button",{onClick:()=>h(t),className:`px-3 py-2 rounded-xl text-[9px] font-black uppercase transition-all ${u===t?"bg-black text-white":"text-zinc-400 hover:text-black"}`,children:e},e))})})]}),(0,r.jsxs)(c.Zp,{className:"!p-0 overflow-hidden shadow-2xl",children:[(0,r.jsxs)("div",{className:"p-8 border-b border-zinc-100 flex flex-wrap items-center justify-between gap-6 bg-zinc-50/20",children:[(0,r.jsxs)("div",{className:"relative max-w-xs w-full",children:[(0,r.jsx)(i.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-300",size:18}),(0,r.jsx)("input",{type:"text",placeholder:"Query by name...",value:x,onChange:e=>m(e.target.value),className:"w-full pl-12 pr-4 py-4 bg-white border border-zinc-100 rounded-2xl text-[10px] font-black uppercase tracking-widest outline-none focus:border-black transition-all"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(c.Ex,{variant:"black",children:["Month: ",j[u]," ",f]}),(0,r.jsx)("button",{onClick:g,className:"p-4 bg-white border border-zinc-100 rounded-2xl hover:text-black transition-all",children:(0,r.jsx)(l.A,{size:18})})]})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-left whitespace-nowrap min-w-[1200px]",children:[(0,r.jsx)("thead",{className:"bg-zinc-50/50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-8 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest",children:"Agent"}),(0,r.jsx)("th",{className:"px-8 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center",children:"Summary (P|L|A|V)"}),(0,r.jsx)("th",{className:"px-8 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center",children:"Protocol Timings"}),(0,r.jsx)("th",{className:"px-8 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center",children:"Expected Break"}),(0,r.jsx)("th",{className:"px-8 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center",children:"Details"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-zinc-100",children:k.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-zinc-50/30 transition-colors group",children:[(0,r.jsx)("td",{className:"px-8 py-6",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-black rounded-xl flex items-center justify-center text-white font-black text-xs shadow-sm",children:e.full_name?.[0]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-black text-black tracking-tight leading-none mb-1 text-sm uppercase",children:e.full_name}),(0,r.jsx)("p",{className:"text-[9px] text-zinc-400 font-black tracking-widest uppercase",children:e.position})]})]})}),(0,r.jsx)("td",{className:"px-8 py-6 text-center",children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsxs)(c.Ex,{variant:"emerald",children:[e.present,"P"]}),(0,r.jsxs)(c.Ex,{variant:"amber",children:[e.late,"L"]}),(0,r.jsxs)(c.Ex,{variant:"rose",children:[e.absent,"A"]}),(0,r.jsxs)(c.Ex,{variant:"indigo",children:[e.leave,"V"]})]})}),(0,r.jsxs)("td",{className:"px-8 py-6 text-center",children:[(0,r.jsxs)("p",{className:"font-black text-black text-xs uppercase tracking-tighter",children:[v(e.entry_time)," - ",v(e.exit_time)]}),(0,r.jsx)("p",{className:"text-[8px] text-zinc-400 font-black uppercase tracking-widest",children:e.shift})]}),(0,r.jsx)("td",{className:"px-8 py-6 text-center",children:(0,r.jsxs)("p",{className:"text-[10px] font-black text-zinc-500",children:[v(e.break_in)," - ",v(e.break_off)]})}),(0,r.jsx)("td",{className:"px-8 py-6 text-center",children:(0,r.jsxs)("div",{className:"flex flex-col gap-1 items-center",children:[(0,r.jsxs)(c.Ex,{variant:"slate",children:["PKR ",e.salary,"K"]}),(0,r.jsx)("span",{className:"text-[8px] font-black text-zinc-300 uppercase",children:e.phone})]})})]},e._id))})]})})]})]})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79551:e=>{"use strict";e.exports=require("url")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,49,523,287],()=>s(32145));module.exports=r})();