(()=>{var e={};e.id=698,e.ids=[698],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4643:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(41680).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},5128:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\computer lab\\\\Pictures\\\\HR-Portal-System-main\\\\HR-Portal-System-main\\\\app\\\\admin\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\computer lab\\Pictures\\HR-Portal-System-main\\HR-Portal-System-main\\app\\admin\\page.tsx","default")},7328:(e,t,r)=>{Promise.resolve().then(r.bind(r,5128))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13287:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(41680).A)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},53999:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var a=r(45512),s=r(58009),n=r(64977),c=r(13287),i=r(4643),l=r(41680);let d=(0,l.A)("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var o=r(86235);let x=(0,l.A)("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);var p=r(41384);let m=(0,l.A)("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);var h=r(16873),b=r(70399),u=r(5091),y=r(68578);let f=()=>{let{user:e}=(0,u.A)(),[t,r]=(0,s.useState)([]),[l,f]=(0,s.useState)(!0),[k,g]=(0,s.useState)(""),[j,N]=(0,s.useState)(!1),[v,z]=(0,s.useState)(null),[w,_]=(0,s.useState)(!1),P=async()=>{f(!0);try{let[e,t]=await Promise.all([fetch("/api/users"),fetch("/api/attendance")]);if(!e.ok||!t.ok)throw Error("Sync failed");let a=await e.json(),s=await t.json(),n=new Date,c=n.toLocaleDateString("en-CA"),i=n.getMonth(),l=n.getFullYear(),d=a.map(e=>{let t=s.filter(t=>t.user_id?._id===e._id),r=t.find(e=>e.date.startsWith(c)),a=t.filter(e=>{let t=new Date(e.date);return t.getMonth()===i&&t.getFullYear()===l}),n=a.filter(e=>"late"===e.status).length,d=a.filter(e=>"absent"===e.status).length,o=a.filter(e=>"leave"===e.status).length;return{...e,check_in:r?.check_in||"-",check_out:r?.check_out||"-",dressing:r?.dressing||"NONE",attendance_status:r?.status||"A",is_late_today:r?.status==="late",late_summary:`${n} Late, ${d} Absent`,monthly_leaves:o}});r(d)}catch(e){y.oR.error("Network connection unstable")}finally{f(!1)}};(0,s.useEffect)(()=>{P()},[]);let S=e=>{if(!e||"-"===e||"NONE"===e)return"-";if("string"==typeof e&&e.includes("T"))try{let t=new Date(e);if(isNaN(t.getTime()))return e;return t.toLocaleTimeString("en-PK",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch(e){}return e},C=t.filter(e=>e.full_name?.toLowerCase().includes(k.toLowerCase())||e.email?.toLowerCase().includes(k.toLowerCase())||e.cnic?.includes(k)),A=[{label:"Today Strength",value:t.length.toString(),icon:(0,a.jsx)(n.A,{size:24}),color:"bg-black"},{label:"Today Present",value:t.filter(e=>"present"===e.attendance_status||"late"===e.attendance_status).length.toString(),icon:(0,a.jsx)(c.A,{size:24}),color:"bg-emerald-500"},{label:"Today Late",value:t.filter(e=>"late"===e.attendance_status).length.toString(),icon:(0,a.jsx)(i.A,{size:24}),color:"bg-amber-500"},{label:"Today Absent",value:t.filter(e=>"absent"===e.attendance_status||"A"===e.attendance_status).length.toString(),icon:(0,a.jsx)(d,{size:24}),color:"bg-rose-500"}];return l?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-4",children:[(0,a.jsx)(o.A,{className:"animate-spin text-black",size:48}),(0,a.jsx)("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-zinc-400",children:"Syncing Intelligence..."})]}):(0,a.jsxs)("div",{className:"space-y-12",children:[(0,a.jsxs)("div",{className:"flex flex-col xl:flex-row xl:items-end justify-between gap-8 bg-zinc-50/50 p-8 rounded-[3rem] border border-zinc-100",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),(0,a.jsx)("p",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest",children:"Live Control Center"})]}),(0,a.jsxs)("h1",{className:"text-4xl sm:text-6xl font-black text-black tracking-tighter uppercase leading-[0.85]",children:["Today's ",(0,a.jsx)("br",{})," Stream"]}),(0,a.jsxs)("div",{className:"flex items-center gap-6 pt-2",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-[12px] font-black text-black uppercase",children:"PK Time Zone"}),(0,a.jsx)("span",{className:"text-[10px] font-bold text-zinc-400 uppercase",children:new Date().toLocaleTimeString("en-PK",{hour12:!1})})]}),(0,a.jsx)("div",{className:"h-8 w-px bg-zinc-200"}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-[12px] font-black text-black uppercase",children:"Active Policy"}),(0,a.jsx)("span",{className:"text-[10px] font-bold text-zinc-400 uppercase",children:"Sunday: Off Duty"})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,a.jsx)(b.jn,{icon:x,onClick:()=>window.open(`https://api.qrserver.com/v1/create-qr-code/?size=400x400&data=${encodeURIComponent(window.location.host+"/employee")}`,"_blank"),className:"bg-black text-white hover:bg-zinc-800 transition-all shadow-xl",children:"Terminal QR"}),(0,a.jsx)(b.jn,{icon:p.A,onClick:P,className:"bg-white !text-black border border-zinc-200 hover:border-black shadow-none transition-all",children:"Update Feed"})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:A.map((e,t)=>(0,a.jsxs)(b.Zp,{className:"p-8 group border-zinc-100 shadow-sm relative overflow-hidden",children:[(0,a.jsx)("div",{className:`w-12 h-12 ${e.color} text-white rounded-2xl flex items-center justify-center mb-6`,children:e.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest mb-1",children:e.label}),(0,a.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,a.jsx)("h3",{className:"text-4xl font-black text-black tracking-tighter",children:e.value}),(0,a.jsx)("span",{className:"text-[10px] font-black text-zinc-300 uppercase",children:"Agents"})]})]})]},t))}),(0,a.jsxs)(b.Zp,{className:"!p-0 border-zinc-100 shadow-2xl rounded-[2rem] overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-6 sm:p-10 border-b border-zinc-100 flex flex-col lg:flex-row lg:items-center justify-between gap-6 bg-zinc-50/20",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-black text-white rounded-xl flex items-center justify-center",children:(0,a.jsx)(m,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg sm:text-xl font-black text-black tracking-tight leading-none mb-1",children:"Master Registry"}),(0,a.jsx)("p",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest",children:"Real-time Deployment Tracking"})]})]}),(0,a.jsxs)("div",{className:"relative w-full lg:max-w-xs",children:[(0,a.jsx)(h.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-300",size:16}),(0,a.jsx)("input",{type:"text",placeholder:"Lookup...",value:k,onChange:e=>g(e.target.value),className:"w-full pl-11 pr-5 py-4 bg-white border border-zinc-200 rounded-2xl text-[10px] font-black uppercase tracking-widest outline-none focus:border-black transition-all"})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left whitespace-nowrap min-w-[2400px] border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-zinc-50 border-y border-zinc-100",children:[(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest border-r border-zinc-100",children:"ID"}),(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest border-r border-zinc-100",children:"Employee Name"}),(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center border-r border-zinc-100",children:"Attendance"}),(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center border-r border-zinc-100",children:"Actual In"}),(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center border-r border-zinc-100",children:"Actual Out"}),(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center border-r border-zinc-100",children:"Casual Leave"}),(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center border-r border-zinc-100",children:"Half Day"}),(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest border-r border-zinc-100",children:"Mobile No"}),(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest border-r border-zinc-100",children:"Position"}),(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest border-r border-zinc-100",children:"Job Title"}),(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest border-r border-zinc-100",children:"CNIC No"}),(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center border-r border-zinc-100",children:"Timing In"}),(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center border-r border-zinc-100",children:"Timing Out"}),(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center border-r border-zinc-100",children:"Late Summary"}),(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center border-r border-zinc-100",children:"Break In"}),(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center border-r border-zinc-100",children:"Break Off"}),(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest border-r border-zinc-100",children:"Shift"}),(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest border-r border-zinc-100",children:"Email"}),(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center border-r border-zinc-100",children:"Casual Dressing"}),(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center",children:"Formal Dressing"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-zinc-100",children:C.map((e,t)=>(0,a.jsxs)("tr",{className:"hover:bg-zinc-50/50 transition-colors text-[11px] font-bold",children:[(0,a.jsx)("td",{className:"px-6 py-5 border-r border-zinc-100 text-zinc-400",children:t+1}),(0,a.jsx)("td",{className:"px-6 py-5 border-r border-zinc-100",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-zinc-900 text-white rounded-lg flex items-center justify-center font-black text-[10px]",children:e.full_name?.[0]}),(0,a.jsx)("span",{className:"uppercase text-black font-black whitespace-nowrap",children:e.full_name})]})}),(0,a.jsx)("td",{className:"px-6 py-5 text-center border-r border-zinc-100",children:(0,a.jsx)(b.Ex,{variant:"present"===e.attendance_status?"emerald":"late"===e.attendance_status?"amber":"rose",children:"present"===e.attendance_status?"P":"late"===e.attendance_status?"L":"A"})}),(0,a.jsx)("td",{className:"px-6 py-5 text-center border-r border-zinc-100 tabular-nums text-emerald-600 font-black",children:S(e.check_in)}),(0,a.jsx)("td",{className:"px-6 py-5 text-center border-r border-zinc-100 tabular-nums text-rose-600 font-black",children:S(e.check_out)}),(0,a.jsx)("td",{className:"px-6 py-5 text-center border-r border-zinc-100 text-zinc-500",children:e.casual_leaves||e.monthly_leaves||"-"}),(0,a.jsx)("td",{className:"px-6 py-5 text-center border-r border-zinc-100 text-zinc-500",children:e.half_day||"-"}),(0,a.jsx)("td",{className:"px-6 py-5 border-r border-zinc-100 text-black",children:e.phone||"-"}),(0,a.jsx)("td",{className:"px-6 py-5 border-r border-zinc-100 text-zinc-500 uppercase",children:e.position||"-"}),(0,a.jsx)("td",{className:"px-6 py-5 border-r border-zinc-100 text-zinc-500 uppercase",children:e.department||"-"}),(0,a.jsx)("td",{className:"px-6 py-5 border-r border-zinc-100 text-black",children:e.cnic||"-"}),(0,a.jsx)("td",{className:"px-6 py-5 text-center border-r border-zinc-100 tabular-nums text-black font-black",children:S(e.entry_time)}),(0,a.jsx)("td",{className:"px-6 py-5 text-center border-r border-zinc-100 tabular-nums text-black font-black",children:S(e.exit_time)}),(0,a.jsx)("td",{className:"px-6 py-5 text-center border-r border-zinc-100",children:(0,a.jsx)("span",{className:"text-[10px] font-black text-amber-600",children:e.late_summary})}),(0,a.jsx)("td",{className:"px-6 py-5 text-center border-r border-zinc-100 tabular-nums text-zinc-500",children:S(e.break_in)}),(0,a.jsx)("td",{className:"px-6 py-5 text-center border-r border-zinc-100 tabular-nums text-zinc-500",children:S(e.break_off)}),(0,a.jsx)("td",{className:"px-6 py-5 border-r border-zinc-100 uppercase text-black font-black",children:e.shift||"-"}),(0,a.jsx)("td",{className:"px-6 py-5 border-r border-zinc-100 text-zinc-400 lowercase",children:e.email}),(0,a.jsx)("td",{className:"px-6 py-5 text-center border-r border-zinc-100",children:(0,a.jsx)(b.Ex,{variant:"casual"===e.dressing?"black":"slate",children:"casual"===e.dressing?"YES":"NO"})}),(0,a.jsx)("td",{className:"px-6 py-5 text-center",children:(0,a.jsx)(b.Ex,{variant:"formal"===e.dressing?"black":"slate",children:"formal"===e.dressing?"YES":"NO"})})]},e._id))})]})})]}),(0,a.jsx)(b.aF,{isOpen:j,onClose:()=>N(!1),title:"Registry Override",children:v&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(b.pd,{label:"Full Name",value:v.full_name,onChange:e=>z({...v,full_name:e.target.value})}),(0,a.jsx)(b.pd,{label:"Position",value:v.position,onChange:e=>z({...v,position:e.target.value})}),(0,a.jsx)(b.jn,{onClick:async()=>{_(!0);try{(await fetch("/api/users",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:v._id,updates:{full_name:v.full_name,position:v.position}})})).ok&&(y.oR.success("Updated"),P(),N(!1))}finally{_(!1)}},disabled:w,className:"w-full",children:w?"Syncing...":"Update Base Records"})]})})]})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70313:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>c.a,__next_app__:()=>x,pages:()=>o,routeModule:()=>p,tree:()=>d});var a=r(70260),s=r(28203),n=r(25155),c=r.n(n),i=r(67292),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d={children:["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5128)),"C:\\Users\\computer lab\\Pictures\\HR-Portal-System-main\\HR-Portal-System-main\\app\\admin\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,54899)),"C:\\Users\\computer lab\\Pictures\\HR-Portal-System-main\\HR-Portal-System-main\\app\\admin\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,19611)),"C:\\Users\\computer lab\\Pictures\\HR-Portal-System-main\\HR-Portal-System-main\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,61129)),"C:\\Users\\computer lab\\Pictures\\HR-Portal-System-main\\HR-Portal-System-main\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,o=["C:\\Users\\computer lab\\Pictures\\HR-Portal-System-main\\HR-Portal-System-main\\app\\admin\\page.tsx"],x={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},79551:e=>{"use strict";e.exports=require("url")},94176:(e,t,r)=>{Promise.resolve().then(r.bind(r,53999))}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,49,523,287],()=>r(70313));module.exports=a})();