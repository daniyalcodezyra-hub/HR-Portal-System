(()=>{var e={};e.id=887,e.ids=[887],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},23515:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(56037),s=r.n(a);s().models.User&&delete s().models.User;let n=new(s()).Schema({email:{type:String,required:[!0,"Please provide an email"],unique:!0},password:{type:String,required:[!0,"Please provide a password"],select:!1},full_name:{type:String,required:[!0,"Please provide a full name"]},role:{type:String,enum:["admin","employee"],default:"employee"},phone:{type:String,default:""},cnic:{type:String,default:"",required:!1},position:{type:String,default:"Associate"},salary:{type:String,default:"0"},shift:{type:String,default:"Day Shift"},department:{type:String,default:"Operations"},entry_time:{type:String,default:"09:00"},exit_time:{type:String,default:"18:00"},break_in:{type:String,default:"13:00"},break_off:{type:String,default:"14:00"},annual_leaves:{type:Number,default:20},casual_leaves:{type:Number,default:0},half_day:{type:Number,default:0},status:{type:String,default:"active"},createdAt:{type:Date,default:Date.now},updatedAt:{type:Date,default:Date.now}},{strict:!1,timestamps:!0}),i=s().model("User",n)},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},56037:e=>{"use strict";e.exports=require("mongoose")},62545:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(56037),s=r.n(a);let n=process.env.MONGODB_URI;if(!n)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let i=global.mongoose;i||(i=global.mongoose={conn:null,promise:null});let o=async function(){if(i.conn)return i.conn;i.promise||(i.promise=s().connect(n,{bufferCommands:!1}).then(e=>e));try{i.conn=await i.promise}catch(e){throw i.promise=null,e}return i.conn}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},77495:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>g,routeModule:()=>c,serverHooks:()=>y,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>f});var a={};r.r(a),r.d(a,{POST:()=>d});var s=r(42706),n=r(28203),i=r(45994),o=r(39187),l=r(62545),u=r(23515),p=r(34926);async function d(e){try{await (0,l.A)();let t=await e.json();console.log("CRITICAL: Signup Received Body:",JSON.stringify(t,null,2));let{email:r,password:a,fullName:s,role:n,phone:i,cnic:d,position:c,shift:m,entryTime:f,exitTime:y,breakIn:g,breakOver:S,salary:h,department:v}=t;if(!r||!a||!s)return o.NextResponse.json({error:"Required: Email, Password, Full Name"},{status:400});let x=await p.Ay.hash(a,12),w=r.toLowerCase().startsWith("admin@")||"admin"===n?"admin":"employee",_={email:r.toLowerCase(),password:x,full_name:s,role:w,phone:i||"",cnic:d||"",position:c||"Senior Developer",salary:h||"0",shift:m||"Day Shift",department:v||"Operations",entry_time:f||"09:00",exit_time:y||"18:00",break_in:g||"13:00",break_off:S||"14:00"};console.log("CRITICAL: Attempting to save User with data:",JSON.stringify(_,null,2));let A=await u.A.create(_);console.log("CRITICAL: User saved in DB. Actual Document:",JSON.stringify(A,null,2));let R={id:A._id,email:A.email,full_name:A.full_name,role:A.role};return o.NextResponse.json({message:"User created successfully",user:R},{status:201})}catch(e){return console.error("Signup Failure Trace:",e),o.NextResponse.json({error:e.message||"Internal Server Error"},{status:500})}}let c=new s.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/auth/signup/route",pathname:"/api/auth/signup",filename:"route",bundlePath:"app/api/auth/signup/route"},resolvedPagePath:"C:\\Users\\computer lab\\Pictures\\HR-Portal-System-main\\HR-Portal-System-main\\app\\api\\auth\\signup\\route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:m,workUnitAsyncStorage:f,serverHooks:y}=c;function g(){return(0,i.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:f})}},78335:()=>{},96487:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,452,926],()=>r(77495));module.exports=a})();