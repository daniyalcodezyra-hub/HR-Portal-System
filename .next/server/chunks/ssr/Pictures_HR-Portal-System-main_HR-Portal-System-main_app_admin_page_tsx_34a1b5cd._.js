module.exports=[79314,a=>{"use strict";var b=a.i(90119),c=a.i(10140),d=a.i(42839),e=a.i(1227),f=a.i(68663),g=a.i(12029),h=a.i(6380);let i=(0,h.default)("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);var j=a.i(59035),k=a.i(38595);let l=(0,h.default)("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),m=(0,h.default)("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var n=a.i(2237),o=a.i(26671),p=a.i(55954);a.s(["default",0,()=>{let{user:a}=(0,o.useAuth)(),[h,q]=(0,c.useState)([]),[r,s]=(0,c.useState)(!0),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(!1),B=async()=>{s(!0);try{let[a,b]=await Promise.all([fetch("/api/users"),fetch("/api/attendance")]);if(!a.ok||!b.ok)throw Error("Sync failed");let c=await a.json(),d=await b.json(),e=new Date,f=e.toLocaleDateString("en-CA"),g=e.getMonth(),h=e.getFullYear(),i=c.map(a=>{let b=d.filter(b=>b.user_id?._id===a._id),c=b.find(a=>a.date.startsWith(f)),e=b.filter(a=>{let b=new Date(a.date);return b.getMonth()===g&&b.getFullYear()===h}),i=e.filter(a=>"late"===a.status).length,j=e.filter(a=>"absent"===a.status).length,k=e.filter(a=>"leave"===a.status).length;return{...a,check_in:c?.check_in||"-",check_out:c?.check_out||"-",dressing:c?.dressing||"NONE",attendance_status:c?.status||"A",is_late_today:c?.status==="late",late_summary:`${i} Late, ${j} Absent`,monthly_leaves:k}});q(i)}catch(a){p.toast.error("Network connection unstable")}finally{s(!1)}};(0,c.useEffect)(()=>{B()},[]);let C=a=>{if(!a||"-"===a||"NONE"===a)return"-";if("string"==typeof a&&a.includes("T"))try{let b=new Date(a);if(isNaN(b.getTime()))return a;return b.toLocaleTimeString("en-PK",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch(a){}return a},D=h.filter(a=>a.full_name?.toLowerCase().includes(t.toLowerCase())||a.email?.toLowerCase().includes(t.toLowerCase())||a.cnic?.includes(t)),E=[{label:"Today Strength",value:h.length.toString(),icon:(0,b.jsx)(d.Users,{size:24}),color:"bg-black"},{label:"Today Present",value:h.filter(a=>"present"===a.attendance_status||"late"===a.attendance_status).length.toString(),icon:(0,b.jsx)(e.UserCheck,{size:24}),color:"bg-emerald-500"},{label:"Today Late",value:h.filter(a=>"late"===a.attendance_status).length.toString(),icon:(0,b.jsx)(f.Clock,{size:24}),color:"bg-amber-500"},{label:"Today Absent",value:h.filter(a=>"absent"===a.attendance_status||"A"===a.attendance_status).length.toString(),icon:(0,b.jsx)(m,{size:24}),color:"bg-rose-500"}];return r?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-4",children:[(0,b.jsx)(k.Loader2,{className:"animate-spin text-black",size:48}),(0,b.jsx)("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-zinc-400",children:"Syncing Intelligence..."})]}):(0,b.jsxs)("div",{className:"space-y-12",children:[(0,b.jsxs)("div",{className:"flex flex-col xl:flex-row xl:items-end justify-between gap-8 bg-zinc-50/50 p-8 rounded-[3rem] border border-zinc-100",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),(0,b.jsx)("p",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest",children:"Live Control Center"})]}),(0,b.jsxs)("h1",{className:"text-4xl sm:text-6xl font-black text-black tracking-tighter uppercase leading-[0.85]",children:["Today's ",(0,b.jsx)("br",{})," Stream"]}),(0,b.jsxs)("div",{className:"flex items-center gap-6 pt-2",children:[(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-[12px] font-black text-black uppercase",children:"PK Time Zone"}),(0,b.jsx)("span",{className:"text-[10px] font-bold text-zinc-400 uppercase",children:new Date().toLocaleTimeString("en-PK",{hour12:!1})})]}),(0,b.jsx)("div",{className:"h-8 w-px bg-zinc-200"}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-[12px] font-black text-black uppercase",children:"Active Policy"}),(0,b.jsx)("span",{className:"text-[10px] font-bold text-zinc-400 uppercase",children:"Sunday: Off Duty"})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,b.jsx)(n.PrimaryButton,{icon:l,onClick:()=>window.open(`https://api.qrserver.com/v1/create-qr-code/?size=400x400&data=${encodeURIComponent(window.location.host+"/employee")}`,"_blank"),className:"bg-black text-white hover:bg-zinc-800 transition-all shadow-xl",children:"Terminal QR"}),(0,b.jsx)(n.PrimaryButton,{icon:j.RefreshCcw,onClick:B,className:"bg-white !text-black border border-zinc-200 hover:border-black shadow-none transition-all",children:"Update Feed"})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:E.map((a,c)=>(0,b.jsxs)(n.Card,{className:"p-8 group border-zinc-100 shadow-sm relative overflow-hidden",children:[(0,b.jsx)("div",{className:`w-12 h-12 ${a.color} text-white rounded-2xl flex items-center justify-center mb-6`,children:a.icon}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest mb-1",children:a.label}),(0,b.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,b.jsx)("h3",{className:"text-4xl font-black text-black tracking-tighter",children:a.value}),(0,b.jsx)("span",{className:"text-[10px] font-black text-zinc-300 uppercase",children:"Agents"})]})]})]},c))}),(0,b.jsxs)(n.Card,{className:"!p-0 border-zinc-100 shadow-2xl rounded-[2rem] overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-6 sm:p-10 border-b border-zinc-100 flex flex-col lg:flex-row lg:items-center justify-between gap-6 bg-zinc-50/20",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-black text-white rounded-xl flex items-center justify-center",children:(0,b.jsx)(i,{size:20})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg sm:text-xl font-black text-black tracking-tight leading-none mb-1",children:"Master Registry"}),(0,b.jsx)("p",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest",children:"Real-time Deployment Tracking"})]})]}),(0,b.jsxs)("div",{className:"relative w-full lg:max-w-xs",children:[(0,b.jsx)(g.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-300",size:16}),(0,b.jsx)("input",{type:"text",placeholder:"Lookup...",value:t,onChange:a=>u(a.target.value),className:"w-full pl-11 pr-5 py-4 bg-white border border-zinc-200 rounded-2xl text-[10px] font-black uppercase tracking-widest outline-none focus:border-black transition-all"})]})]}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-left whitespace-nowrap min-w-[2400px] border-collapse",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-zinc-50 border-y border-zinc-100",children:[(0,b.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest border-r border-zinc-100",children:"ID"}),(0,b.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest border-r border-zinc-100",children:"Employee Name"}),(0,b.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center border-r border-zinc-100",children:"Attendance"}),(0,b.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center border-r border-zinc-100",children:"Actual In"}),(0,b.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center border-r border-zinc-100",children:"Actual Out"}),(0,b.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center border-r border-zinc-100",children:"Casual Leave"}),(0,b.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center border-r border-zinc-100",children:"Half Day"}),(0,b.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest border-r border-zinc-100",children:"Mobile No"}),(0,b.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest border-r border-zinc-100",children:"Position"}),(0,b.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest border-r border-zinc-100",children:"Job Title"}),(0,b.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest border-r border-zinc-100",children:"CNIC No"}),(0,b.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center border-r border-zinc-100",children:"Timing In"}),(0,b.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center border-r border-zinc-100",children:"Timing Out"}),(0,b.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center border-r border-zinc-100",children:"Late Summary"}),(0,b.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center border-r border-zinc-100",children:"Break In"}),(0,b.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center border-r border-zinc-100",children:"Break Off"}),(0,b.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest border-r border-zinc-100",children:"Shift"}),(0,b.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest border-r border-zinc-100",children:"Email"}),(0,b.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center border-r border-zinc-100",children:"Casual Dressing"}),(0,b.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center",children:"Formal Dressing"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-zinc-100",children:D.map((a,c)=>(0,b.jsxs)("tr",{className:"hover:bg-zinc-50/50 transition-colors text-[11px] font-bold",children:[(0,b.jsx)("td",{className:"px-6 py-5 border-r border-zinc-100 text-zinc-400",children:c+1}),(0,b.jsx)("td",{className:"px-6 py-5 border-r border-zinc-100",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-zinc-900 text-white rounded-lg flex items-center justify-center font-black text-[10px]",children:a.full_name?.[0]}),(0,b.jsx)("span",{className:"uppercase text-black font-black whitespace-nowrap",children:a.full_name})]})}),(0,b.jsx)("td",{className:"px-6 py-5 text-center border-r border-zinc-100",children:(0,b.jsx)(n.Badge,{variant:"present"===a.attendance_status?"emerald":"late"===a.attendance_status?"amber":"rose",children:"present"===a.attendance_status?"P":"late"===a.attendance_status?"L":"A"})}),(0,b.jsx)("td",{className:"px-6 py-5 text-center border-r border-zinc-100 tabular-nums text-emerald-600 font-black",children:C(a.check_in)}),(0,b.jsx)("td",{className:"px-6 py-5 text-center border-r border-zinc-100 tabular-nums text-rose-600 font-black",children:C(a.check_out)}),(0,b.jsx)("td",{className:"px-6 py-5 text-center border-r border-zinc-100 text-zinc-500",children:a.casual_leaves||a.monthly_leaves||"-"}),(0,b.jsx)("td",{className:"px-6 py-5 text-center border-r border-zinc-100 text-zinc-500",children:a.half_day||"-"}),(0,b.jsx)("td",{className:"px-6 py-5 border-r border-zinc-100 text-black",children:a.phone||"-"}),(0,b.jsx)("td",{className:"px-6 py-5 border-r border-zinc-100 text-zinc-500 uppercase",children:a.position||"-"}),(0,b.jsx)("td",{className:"px-6 py-5 border-r border-zinc-100 text-zinc-500 uppercase",children:a.department||"-"}),(0,b.jsx)("td",{className:"px-6 py-5 border-r border-zinc-100 text-black",children:a.cnic||"-"}),(0,b.jsx)("td",{className:"px-6 py-5 text-center border-r border-zinc-100 tabular-nums text-black font-black",children:C(a.entry_time)}),(0,b.jsx)("td",{className:"px-6 py-5 text-center border-r border-zinc-100 tabular-nums text-black font-black",children:C(a.exit_time)}),(0,b.jsx)("td",{className:"px-6 py-5 text-center border-r border-zinc-100",children:(0,b.jsx)("span",{className:"text-[10px] font-black text-amber-600",children:a.late_summary})}),(0,b.jsx)("td",{className:"px-6 py-5 text-center border-r border-zinc-100 tabular-nums text-zinc-500",children:C(a.break_in)}),(0,b.jsx)("td",{className:"px-6 py-5 text-center border-r border-zinc-100 tabular-nums text-zinc-500",children:C(a.break_off)}),(0,b.jsx)("td",{className:"px-6 py-5 border-r border-zinc-100 uppercase text-black font-black",children:a.shift||"-"}),(0,b.jsx)("td",{className:"px-6 py-5 border-r border-zinc-100 text-zinc-400 lowercase",children:a.email}),(0,b.jsx)("td",{className:"px-6 py-5 text-center border-r border-zinc-100",children:(0,b.jsx)(n.Badge,{variant:"casual"===a.dressing?"black":"slate",children:"casual"===a.dressing?"YES":"NO"})}),(0,b.jsx)("td",{className:"px-6 py-5 text-center",children:(0,b.jsx)(n.Badge,{variant:"formal"===a.dressing?"black":"slate",children:"formal"===a.dressing?"YES":"NO"})})]},a._id))})]})})]}),(0,b.jsx)(n.Modal,{isOpen:v,onClose:()=>w(!1),title:"Registry Override",children:x&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(n.Input,{label:"Full Name",value:x.full_name,onChange:a=>y({...x,full_name:a.target.value})}),(0,b.jsx)(n.Input,{label:"Position",value:x.position,onChange:a=>y({...x,position:a.target.value})}),(0,b.jsx)(n.PrimaryButton,{onClick:async()=>{A(!0);try{(await fetch("/api/users",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:x._id,updates:{full_name:x.full_name,position:x.position}})})).ok&&(p.toast.success("Updated"),B(),w(!1))}finally{A(!1)}},disabled:z,className:"w-full",children:z?"Syncing...":"Update Base Records"})]})})]})}],79314)}];

//# sourceMappingURL=Pictures_HR-Portal-System-main_HR-Portal-System-main_app_admin_page_tsx_34a1b5cd._.js.map