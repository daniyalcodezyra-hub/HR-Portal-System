(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[24],{767:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7401).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},853:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7401).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},1466:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7401).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1925:(e,t,a)=>{"use strict";a.d(t,{Ex:()=>n,X3:()=>i,Zp:()=>r,aF:()=>o,jn:()=>c,l6:()=>x,pd:()=>d});var s=a(5155);a(2115);var l=a(767);let r=e=>{let{children:t,className:a=""}=e;return(0,s.jsx)("div",{className:"bg-white rounded-[1.5rem] sm:rounded-[2.5rem] p-5 sm:p-8 shadow-sm border border-slate-100 transition-all duration-300 hover:shadow-xl hover:shadow-slate-200/40 ".concat(a),children:t})},n=e=>{let{children:t,variant:a="slate"}=e;return(0,s.jsx)("span",{className:"px-2 sm:px-3 py-1 rounded-lg sm:rounded-xl text-[9px] sm:text-[10px] font-black uppercase tracking-wider border whitespace-nowrap ".concat({indigo:"bg-indigo-50 text-indigo-600 border-indigo-100",emerald:"bg-emerald-50 text-emerald-600 border-emerald-100",rose:"bg-rose-50 text-rose-600 border-rose-100",amber:"bg-amber-50 text-amber-600 border-amber-100",slate:"bg-slate-50 text-slate-500 border-slate-100",black:"bg-black text-white border-black"}[a]),children:t})},i=e=>{let{title:t,subtitle:a,icon:l,iconColor:r="text-black"}=e;return(0,s.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4 mb-6 sm:mb-8",children:[l&&(0,s.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center ".concat(r," border border-slate-200 shadow-sm flex-shrink-0"),children:(0,s.jsx)(l,{size:20,className:"sm:w-[22px] sm:h-[22px]"})}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("h3",{className:"text-lg sm:text-xl font-black text-black tracking-tight leading-none mb-1 truncate",children:t}),a&&(0,s.jsx)("p",{className:"text-[9px] sm:text-[10px] font-black text-slate-400 uppercase tracking-widest truncate",children:a})]})]})},c=e=>{let{onClick:t,children:a,icon:l,className:r="",disabled:n,type:i="button"}=e;return(0,s.jsxs)("button",{type:i,onClick:t,disabled:n,className:"w-full sm:w-auto px-6 sm:px-8 py-3.5 sm:py-4 bg-black text-white rounded-xl sm:rounded-2xl font-black text-[10px] sm:text-xs uppercase tracking-widest flex items-center justify-center gap-2 shadow-xl shadow-slate-200 hover:bg-zinc-800 transition-all active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed ".concat(r),children:[l&&(0,s.jsx)(l,{size:16,className:"sm:w-[18px] sm:h-[18px]"}),a]})},o=e=>{let{isOpen:t,onClose:a,title:r,children:n}=e;return t?(0,s.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center p-0 sm:p-4",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:a}),(0,s.jsxs)("div",{className:"relative bg-white rounded-t-[2rem] sm:rounded-[3rem] w-full max-w-4xl h-[92vh] sm:h-auto sm:max-h-[90vh] overflow-hidden shadow-2xl animate-in slide-in-from-bottom-10 sm:zoom-in-95 duration-300",children:[(0,s.jsxs)("div",{className:"p-6 sm:p-8 border-b border-slate-100 flex items-center justify-between bg-white",children:[(0,s.jsx)("h3",{className:"text-xl sm:text-2xl font-black text-black tracking-tight",children:r}),(0,s.jsx)("button",{onClick:a,className:"p-2 sm:p-3 hover:bg-slate-100 rounded-xl sm:rounded-2xl transition-colors text-slate-400",children:(0,s.jsx)(l.A,{size:24})})]}),(0,s.jsx)("div",{className:"p-6 sm:p-8 overflow-y-auto max-h-[calc(92vh-100px)] sm:max-h-[calc(90vh-140px)]",children:n})]})]}):null},d=e=>{let{label:t,icon:a,...l}=e;return(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("label",{className:"text-[9px] sm:text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:t}),(0,s.jsxs)("div",{className:"relative group",children:[a&&(0,s.jsx)(a,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within:text-black transition-colors",size:18}),(0,s.jsx)("input",{...l,className:"w-full ".concat(a?"pl-11":"px-5"," pr-4 py-3 sm:py-3.5 bg-white border border-slate-200 rounded-xl sm:rounded-2xl focus:ring-4 focus:ring-slate-500/10 focus:border-black outline-none transition-all font-medium text-black text-sm sm:text-base")})]})]})},x=e=>{let{label:t,options:a,...l}=e;return(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("label",{className:"text-[9px] sm:text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:t}),(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)("select",{...l,className:"w-full px-5 py-3 sm:py-3.5 bg-white border border-slate-200 rounded-xl sm:rounded-2xl focus:ring-4 focus:ring-slate-500/10 focus:border-black outline-none transition-all font-medium text-black text-sm sm:text-base appearance-none",children:a.map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400 group-focus-within:text-black transition-colors",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]})}},3580:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7401).A)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},3831:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7401).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},4505:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7401).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},4839:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7401).A)("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},5182:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var s=a(5155),l=a(2115),r=a(4505),n=a(853),i=a(7401);let c=(0,i.A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var o=a(3580);let d=(0,i.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var x=a(1466),p=a(4839),m=a(3831),u=a(6889),h=a(7780),b=a(1925),f=a(2110);let v=()=>{let[e,t]=(0,l.useState)([]),[a,i]=(0,l.useState)(!0),[v,g]=(0,l.useState)(!1),[k,y]=(0,l.useState)(null),[j,w]=(0,l.useState)(""),N=async()=>{i(!0);try{let e=await fetch("/api/users"),a=await e.json();e.ok&&t(a||[])}catch(e){console.error("Error fetching profiles:",e)}finally{i(!1)}};(0,l.useEffect)(()=>{N()},[]);let C=e=>{y({...e}),g(!0)},z=async e=>{if(window.confirm("Are you sure you want to delete this staff record?"))try{(await fetch("/api/users?userId=".concat(e),{method:"DELETE"})).ok?(f.oR.success("Staff record removed"),N()):f.oR.error("Failed to delete")}catch(e){f.oR.error("Process error")}},A=async e=>{if(e.preventDefault(),k&&k._id)try{(await fetch("/api/users",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:k._id,updates:{full_name:k.full_name,role:k.role,shift:k.shift,department:k.department,phone:k.phone,cnic:k.cnic,position:k.position,salary:k.salary,entry_time:k.entry_time,exit_time:k.exit_time,break_in:k.break_in,break_off:k.break_off,annual_leaves:k.annual_leaves}})})).ok?(f.oR.success("Profile updated"),N(),g(!1)):f.oR.error("Update failed")}catch(e){f.oR.error("Process error")}},_=(e,t)=>{k&&y({...k,[e]:t})},S=e=>{if(!e||"-"===e||"NONE"===e)return"-";if("string"==typeof e&&e.includes("T"))try{let t=new Date(e);if(isNaN(t.getTime()))return e;return t.toLocaleTimeString("en-PK",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch(e){}return e},E=e.filter(e=>{var t,a,s,l;return(null===(t=e.full_name)||void 0===t?void 0:t.toLowerCase().includes(j.toLowerCase()))||(null===(a=e.email)||void 0===a?void 0:a.toLowerCase().includes(j.toLowerCase()))||(null===(s=e.department)||void 0===s?void 0:s.toLowerCase().includes(j.toLowerCase()))||(null===(l=e.cnic)||void 0===l?void 0:l.includes(j))});return a&&0===e.length?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsx)(r.A,{className:"animate-spin text-black",size:48}),(0,s.jsx)("p",{className:"text-zinc-400 font-black uppercase text-[10px] tracking-[0.4em]",children:"Querying Workforce..."})]})}):(0,s.jsxs)("div",{className:"space-y-8 pb-10",children:[(0,s.jsx)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-4xl font-black text-black tracking-tighter leading-none mb-2",children:"Staff Registry"}),(0,s.jsx)("p",{className:"text-zinc-500 font-bold uppercase text-[10px] tracking-[0.2em]",children:"Detailed Resource Intelligence"})]})}),(0,s.jsxs)(b.Zp,{className:"!p-0 overflow-hidden shadow-2xl border border-zinc-100",children:[(0,s.jsxs)("div",{className:"p-8 border-b border-zinc-100 flex flex-col sm:flex-row sm:items-center justify-between gap-6 bg-zinc-50/20",children:[(0,s.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,s.jsx)(n.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-300",size:18}),(0,s.jsx)("input",{type:"text",placeholder:"Query database (Name, CNIC, Dept)...",value:j,onChange:e=>w(e.target.value),className:"w-full pl-11 pr-4 py-4 bg-white border border-zinc-100 rounded-2xl text-[10px] font-black uppercase tracking-widest outline-none focus:border-black transition-all"})]}),(0,s.jsxs)("button",{onClick:N,className:"flex items-center justify-center gap-2 px-6 py-4 bg-white text-zinc-500 border border-zinc-100 rounded-2xl font-black text-[10px] uppercase tracking-widest hover:text-black transition-all shadow-sm",children:[(0,s.jsx)(c,{size:16})," Refresh"]})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-left border-collapse min-w-[1200px]",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-zinc-50/50 border-b border-zinc-100",children:[(0,s.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest",children:"Agent Detail"}),(0,s.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center",children:"Identity (CNIC)"}),(0,s.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center",children:"Payroll (PKR)"}),(0,s.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center",children:"Shift/Time"}),(0,s.jsx)("th",{className:"px-8 py-6 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center",children:"Break Protocol"}),(0,s.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center",children:"Manage"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-zinc-100",children:E.map(e=>{var t,a;return(0,s.jsxs)("tr",{className:"hover:bg-zinc-50/30 transition-colors group text-xs",children:[(0,s.jsx)("td",{className:"px-6 py-6 min-w-[250px]",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-black rounded-xl flex items-center justify-center text-white font-black",children:null===(t=e.full_name)||void 0===t?void 0:t[0]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-black text-black tracking-tight leading-none mb-1 text-sm uppercase",children:e.full_name}),(0,s.jsx)("p",{className:"text-[9px] text-zinc-400 font-bold tracking-widest uppercase",children:e.position}),(0,s.jsx)("p",{className:"text-[9px] text-zinc-400 font-bold tracking-widest",children:e.email})]})]})}),(0,s.jsxs)("td",{className:"px-6 py-6 text-center",children:[(0,s.jsx)("p",{className:"font-black text-black",children:e.cnic||"NOT-SET"}),(0,s.jsx)("p",{className:"text-[9px] text-zinc-400 font-bold tracking-widest",children:e.phone||"NO-PH"})]}),(0,s.jsxs)("td",{className:"px-6 py-6 text-center font-black",children:[(0,s.jsxs)("p",{children:["Rs ",e.salary||"0"]}),(0,s.jsx)(b.Ex,{variant:"slate",children:null===(a=e.department)||void 0===a?void 0:a.toUpperCase()})]}),(0,s.jsxs)("td",{className:"px-6 py-6 text-center",children:[(0,s.jsx)("p",{className:"font-black text-black uppercase tracking-widest mb-1",children:e.shift}),(0,s.jsxs)("p",{className:"text-[10px] font-bold text-zinc-400",children:[S(e.entry_time)," - ",S(e.exit_time)]})]}),(0,s.jsxs)("td",{className:"px-6 py-6 text-center font-black text-[10px] text-zinc-400",children:[S(e.break_in)," - ",S(e.break_off)]}),(0,s.jsx)("td",{className:"px-6 py-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>C(e),className:"p-2.5 text-zinc-400 hover:text-black hover:bg-zinc-100 rounded-xl transition-all",children:(0,s.jsx)(o.A,{size:18})}),(0,s.jsx)("button",{onClick:()=>z(e._id),className:"p-2.5 text-zinc-400 hover:text-rose-600 hover:bg-rose-50 rounded-xl transition-all",children:(0,s.jsx)(d,{size:18})})]})})]},e._id)})})]})})]}),(0,s.jsx)(b.aF,{isOpen:v,onClose:()=>g(!1),title:"Registry Override",children:(0,s.jsxs)("form",{onSubmit:A,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsx)(b.pd,{label:"Full Name",value:(null==k?void 0:k.full_name)||"",onChange:e=>_("full_name",e.target.value),icon:x.A}),(0,s.jsx)(b.pd,{label:"Job Title / Position",value:(null==k?void 0:k.position)||"",onChange:e=>_("position",e.target.value),icon:p.A}),(0,s.jsx)(b.pd,{label:"Primary Mobile",value:(null==k?void 0:k.phone)||"",onChange:e=>_("phone",e.target.value),icon:m.A}),(0,s.jsx)(b.pd,{label:"CNIC Number",value:(null==k?void 0:k.cnic)||"",onChange:e=>_("cnic",e.target.value),icon:CreditCard}),(0,s.jsx)(b.pd,{label:"Department",value:(null==k?void 0:k.department)||"",onChange:e=>_("department",e.target.value),icon:p.A}),(0,s.jsx)(b.pd,{label:"Monthly Salary (PKR)",value:(null==k?void 0:k.salary)||"",onChange:e=>_("salary",e.target.value),icon:DollarSign}),(0,s.jsx)(b.pd,{label:"Annual Leaves Allowance",type:"number",value:(null==k?void 0:k.annual_leaves)||20,onChange:e=>_("annual_leaves",parseInt(e.target.value)),icon:Calendar}),(0,s.jsxs)("div",{className:"md:col-span-2 grid grid-cols-2 gap-4",children:[(0,s.jsx)(b.pd,{label:"Entry Time",type:"time",value:(null==k?void 0:k.entry_time)||"",onChange:e=>_("entry_time",e.target.value),icon:u.A}),(0,s.jsx)(b.pd,{label:"Exit Time",type:"time",value:(null==k?void 0:k.exit_time)||"",onChange:e=>_("exit_time",e.target.value),icon:u.A})]}),(0,s.jsxs)("div",{className:"md:col-span-2 grid grid-cols-2 gap-4",children:[(0,s.jsx)(b.pd,{label:"Break Start",type:"time",value:(null==k?void 0:k.break_in)||"",onChange:e=>_("break_in",e.target.value),icon:u.A}),(0,s.jsx)(b.pd,{label:"Break End",type:"time",value:(null==k?void 0:k.break_off)||"",onChange:e=>_("break_off",e.target.value),icon:u.A})]}),(0,s.jsx)(b.l6,{label:"Current Shift",value:(null==k?void 0:k.shift)||"Day Shift",onChange:e=>_("shift",e.target.value),options:["Day Shift","Night Shift"]}),(0,s.jsx)(b.l6,{label:"System Role",value:(null==k?void 0:k.role)||"employee",onChange:e=>_("role",e.target.value),options:["admin","employee"]}),(0,s.jsx)("div",{className:"md:col-span-2 flex justify-end gap-3 pt-4",children:(0,s.jsx)(b.jn,{type:"submit",icon:h.A,children:"Update Records"})})]})})]})}},6889:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7401).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},7401:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var s=a(2115);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:x,...p}=e;return(0,s.createElement)("svg",{ref:t,...n,width:l,height:l,stroke:a,strokeWidth:c?24*Number(i)/Number(l):i,className:r("lucide",o),...p},[...x.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let a=(0,s.forwardRef)((a,n)=>{let{className:c,...o}=a;return(0,s.createElement)(i,{ref:n,iconNode:t,className:r("lucide-".concat(l(e)),c),...o})});return a.displayName="".concat(e),a}},7780:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7401).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},7865:(e,t,a)=>{Promise.resolve().then(a.bind(a,5182))}},e=>{var t=t=>e(e.s=t);e.O(0,[110,441,587,358],()=>t(7865)),_N_E=e.O()}]);