(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[288],{767:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(7401).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},853:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(7401).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},1925:(e,t,s)=>{"use strict";s.d(t,{Ex:()=>n,X3:()=>i,Zp:()=>l,aF:()=>d,jn:()=>c,l6:()=>x,pd:()=>o});var a=s(5155);s(2115);var r=s(767);let l=e=>{let{children:t,className:s=""}=e;return(0,a.jsx)("div",{className:"bg-white rounded-[1.5rem] sm:rounded-[2.5rem] p-5 sm:p-8 shadow-sm border border-slate-100 transition-all duration-300 hover:shadow-xl hover:shadow-slate-200/40 ".concat(s),children:t})},n=e=>{let{children:t,variant:s="slate"}=e;return(0,a.jsx)("span",{className:"px-2 sm:px-3 py-1 rounded-lg sm:rounded-xl text-[9px] sm:text-[10px] font-black uppercase tracking-wider border whitespace-nowrap ".concat({indigo:"bg-indigo-50 text-indigo-600 border-indigo-100",emerald:"bg-emerald-50 text-emerald-600 border-emerald-100",rose:"bg-rose-50 text-rose-600 border-rose-100",amber:"bg-amber-50 text-amber-600 border-amber-100",slate:"bg-slate-50 text-slate-500 border-slate-100",black:"bg-black text-white border-black"}[s]),children:t})},i=e=>{let{title:t,subtitle:s,icon:r,iconColor:l="text-black"}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4 mb-6 sm:mb-8",children:[r&&(0,a.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center ".concat(l," border border-slate-200 shadow-sm flex-shrink-0"),children:(0,a.jsx)(r,{size:20,className:"sm:w-[22px] sm:h-[22px]"})}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("h3",{className:"text-lg sm:text-xl font-black text-black tracking-tight leading-none mb-1 truncate",children:t}),s&&(0,a.jsx)("p",{className:"text-[9px] sm:text-[10px] font-black text-slate-400 uppercase tracking-widest truncate",children:s})]})]})},c=e=>{let{onClick:t,children:s,icon:r,className:l="",disabled:n,type:i="button"}=e;return(0,a.jsxs)("button",{type:i,onClick:t,disabled:n,className:"w-full sm:w-auto px-6 sm:px-8 py-3.5 sm:py-4 bg-black text-white rounded-xl sm:rounded-2xl font-black text-[10px] sm:text-xs uppercase tracking-widest flex items-center justify-center gap-2 shadow-xl shadow-slate-200 hover:bg-zinc-800 transition-all active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed ".concat(l),children:[r&&(0,a.jsx)(r,{size:16,className:"sm:w-[18px] sm:h-[18px]"}),s]})},d=e=>{let{isOpen:t,onClose:s,title:l,children:n}=e;return t?(0,a.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center p-0 sm:p-4",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:s}),(0,a.jsxs)("div",{className:"relative bg-white rounded-t-[2rem] sm:rounded-[3rem] w-full max-w-4xl h-[92vh] sm:h-auto sm:max-h-[90vh] overflow-hidden shadow-2xl animate-in slide-in-from-bottom-10 sm:zoom-in-95 duration-300",children:[(0,a.jsxs)("div",{className:"p-6 sm:p-8 border-b border-slate-100 flex items-center justify-between bg-white",children:[(0,a.jsx)("h3",{className:"text-xl sm:text-2xl font-black text-black tracking-tight",children:l}),(0,a.jsx)("button",{onClick:s,className:"p-2 sm:p-3 hover:bg-slate-100 rounded-xl sm:rounded-2xl transition-colors text-slate-400",children:(0,a.jsx)(r.A,{size:24})})]}),(0,a.jsx)("div",{className:"p-6 sm:p-8 overflow-y-auto max-h-[calc(92vh-100px)] sm:max-h-[calc(90vh-140px)]",children:n})]})]}):null},o=e=>{let{label:t,icon:s,...r}=e;return(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("label",{className:"text-[9px] sm:text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:t}),(0,a.jsxs)("div",{className:"relative group",children:[s&&(0,a.jsx)(s,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within:text-black transition-colors",size:18}),(0,a.jsx)("input",{...r,className:"w-full ".concat(s?"pl-11":"px-5"," pr-4 py-3 sm:py-3.5 bg-white border border-slate-200 rounded-xl sm:rounded-2xl focus:ring-4 focus:ring-slate-500/10 focus:border-black outline-none transition-all font-medium text-black text-sm sm:text-base")})]})]})},x=e=>{let{label:t,options:s,...r}=e;return(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("label",{className:"text-[9px] sm:text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:t}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("select",{...r,className:"w-full px-5 py-3 sm:py-3.5 bg-white border border-slate-200 rounded-xl sm:rounded-2xl focus:ring-4 focus:ring-slate-500/10 focus:border-black outline-none transition-all font-medium text-black text-sm sm:text-base appearance-none",children:s.map(e=>(0,a.jsx)("option",{value:e,children:e},e))}),(0,a.jsx)("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400 group-focus-within:text-black transition-colors",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]})}},4505:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(7401).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},4834:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(7401).A)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]])},6106:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(5155),r=s(2115),l=s(4505),n=s(853),i=s(4834),c=s(1925);let d=()=>{let[e,t]=(0,r.useState)([]),[s,d]=(0,r.useState)([]),[o,x]=(0,r.useState)(!0),[m,p]=(0,r.useState)(""),[h,u]=(0,r.useState)(new Date().getMonth()),[b,f]=(0,r.useState)(new Date().getFullYear()),g=async()=>{x(!0);try{let[e,s]=await Promise.all([fetch("/api/attendance"),fetch("/api/users")]),a=await e.json(),r=await s.json();e.ok&&t(a||[]),s.ok&&d(r||[])}catch(e){console.error("Error fetching data:",e)}finally{x(!1)}};(0,r.useEffect)(()=>{g()},[]);let k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],j=e=>{if(!e||"-"===e||"NONE"===e)return"-";if("string"==typeof e&&e.includes("T"))try{let t=new Date(e);if(isNaN(t.getTime()))return e;return t.toLocaleTimeString("en-PK",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch(e){}return e},w=e.filter(e=>{let t=new Date(e.date);return t.getMonth()===h&&t.getFullYear()===b}),v=s.map(e=>{let t=w.filter(t=>{var s;return(null===(s=t.user)||void 0===s?void 0:s._id)===e._id||t.user===e._id}),s=t.filter(e=>"present"===e.status).length,a=t.filter(e=>"late"===e.status).length,r=t.filter(e=>"leave"===e.status).length,l=26-(s+a+r);return{...e,present:s,late:a,leave:r,absent:l>0?l:0,logs:t}}).filter(e=>{var t;return null===(t=e.full_name)||void 0===t?void 0:t.toLowerCase().includes(m.toLowerCase())});return o?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)(l.A,{className:"animate-spin text-black",size:48}),(0,a.jsx)("p",{className:"text-zinc-400 font-black uppercase text-[10px] tracking-[0.4em]",children:"Aggregating Monthly Intelligence..."})]})}):(0,a.jsxs)("div",{className:"space-y-8 pb-10",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 bg-zinc-50/50 p-8 rounded-[3rem] border border-zinc-100",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl font-black text-black tracking-tighter leading-none mb-2",children:"Monthly Intelligence"}),(0,a.jsx)("p",{className:"text-zinc-500 font-bold uppercase text-[10px] tracking-[0.2em]",children:"Aggregated Workforce Performance Data"})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-4 items-center",children:(0,a.jsx)("div",{className:"flex bg-white rounded-2xl border border-zinc-200 p-1",children:k.map((e,t)=>(0,a.jsx)("button",{onClick:()=>u(t),className:"px-3 py-2 rounded-xl text-[9px] font-black uppercase transition-all ".concat(h===t?"bg-black text-white":"text-zinc-400 hover:text-black"),children:e},e))})})]}),(0,a.jsxs)(c.Zp,{className:"!p-0 overflow-hidden shadow-2xl",children:[(0,a.jsxs)("div",{className:"p-8 border-b border-zinc-100 flex flex-wrap items-center justify-between gap-6 bg-zinc-50/20",children:[(0,a.jsxs)("div",{className:"relative max-w-xs w-full",children:[(0,a.jsx)(n.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-300",size:18}),(0,a.jsx)("input",{type:"text",placeholder:"Query by name...",value:m,onChange:e=>p(e.target.value),className:"w-full pl-12 pr-4 py-4 bg-white border border-zinc-100 rounded-2xl text-[10px] font-black uppercase tracking-widest outline-none focus:border-black transition-all"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(c.Ex,{variant:"black",children:["Month: ",k[h]," ",b]}),(0,a.jsx)("button",{onClick:g,className:"p-4 bg-white border border-zinc-100 rounded-2xl hover:text-black transition-all",children:(0,a.jsx)(i.A,{size:18})})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left whitespace-nowrap min-w-[1200px]",children:[(0,a.jsx)("thead",{className:"bg-zinc-50/50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-8 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest",children:"Agent"}),(0,a.jsx)("th",{className:"px-8 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center",children:"Summary (P|L|A|V)"}),(0,a.jsx)("th",{className:"px-8 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center",children:"Protocol Timings"}),(0,a.jsx)("th",{className:"px-8 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center",children:"Expected Break"}),(0,a.jsx)("th",{className:"px-8 py-5 text-[10px] font-black text-zinc-400 uppercase tracking-widest text-center",children:"Details"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-zinc-100",children:v.map(e=>{var t;return(0,a.jsxs)("tr",{className:"hover:bg-zinc-50/30 transition-colors group",children:[(0,a.jsx)("td",{className:"px-8 py-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-black rounded-xl flex items-center justify-center text-white font-black text-xs shadow-sm",children:null===(t=e.full_name)||void 0===t?void 0:t[0]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-black text-black tracking-tight leading-none mb-1 text-sm uppercase",children:e.full_name}),(0,a.jsx)("p",{className:"text-[9px] text-zinc-400 font-black tracking-widest uppercase",children:e.position})]})]})}),(0,a.jsx)("td",{className:"px-8 py-6 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsxs)(c.Ex,{variant:"emerald",children:[e.present,"P"]}),(0,a.jsxs)(c.Ex,{variant:"amber",children:[e.late,"L"]}),(0,a.jsxs)(c.Ex,{variant:"rose",children:[e.absent,"A"]}),(0,a.jsxs)(c.Ex,{variant:"indigo",children:[e.leave,"V"]})]})}),(0,a.jsxs)("td",{className:"px-8 py-6 text-center",children:[(0,a.jsxs)("p",{className:"font-black text-black text-xs uppercase tracking-tighter",children:[j(e.entry_time)," - ",j(e.exit_time)]}),(0,a.jsx)("p",{className:"text-[8px] text-zinc-400 font-black uppercase tracking-widest",children:e.shift})]}),(0,a.jsx)("td",{className:"px-8 py-6 text-center",children:(0,a.jsxs)("p",{className:"text-[10px] font-black text-zinc-500",children:[j(e.break_in)," - ",j(e.break_off)]})}),(0,a.jsx)("td",{className:"px-8 py-6 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col gap-1 items-center",children:[(0,a.jsxs)(c.Ex,{variant:"slate",children:["PKR ",e.salary,"K"]}),(0,a.jsx)("span",{className:"text-[8px] font-black text-zinc-300 uppercase",children:e.phone})]})})]},e._id)})})]})})]})]})}},7401:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var a=s(2115);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:d="",children:o,iconNode:x,...m}=e;return(0,a.createElement)("svg",{ref:t,...n,width:r,height:r,stroke:s,strokeWidth:c?24*Number(i)/Number(r):i,className:l("lucide",d),...m},[...x.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(o)?o:[o]])}),c=(e,t)=>{let s=(0,a.forwardRef)((s,n)=>{let{className:c,...d}=s;return(0,a.createElement)(i,{ref:n,iconNode:t,className:l("lucide-".concat(r(e)),c),...d})});return s.displayName="".concat(e),s}},8985:(e,t,s)=>{Promise.resolve().then(s.bind(s,6106))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,587,358],()=>t(8985)),_N_E=e.O()}]);