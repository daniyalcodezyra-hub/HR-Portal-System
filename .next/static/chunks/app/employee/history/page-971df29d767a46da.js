(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[992],{767:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(7401).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},1600:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(5155),a=s(2115),l=s(4505),n=s(4834),i=s(2423);let c=(0,s(7401).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var o=s(6967),d=s(1925),x=s(5459);let m=()=>{let{user:e}=(0,x.A)(),[t,s]=(0,a.useState)([]),[m,u]=(0,a.useState)(!0),h=async()=>{if(e){u(!0);try{let e=await fetch("/api/attendance"),t=await e.json();e.ok&&s(t)}catch(e){console.error("Error fetching history:",e)}finally{u(!1)}}};(0,a.useEffect)(()=>{h()},[e]);let p=e=>{let t=new Date(e);return{month:t.toLocaleDateString("en-US",{month:"short"}),day:t.getDate(),full:t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}},b=e=>{if(!e||"--:--"===e||"-"===e)return"--:--";let[t,s]=e.split(":"),r=parseInt(t),a=r>=12?"PM":"AM";return r=r%12||12,"".concat(r,":").concat(s," ").concat(a)};return m&&0===t.length?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,r.jsx)(l.A,{className:"animate-spin text-black",size:48}),(0,r.jsx)("p",{className:"text-zinc-400 font-black uppercase text-[10px] tracking-[0.4em]",children:"Retrieving Chronicles..."})]})}):(0,r.jsxs)("div",{className:"space-y-12 pb-10",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-5xl font-black text-black tracking-tighter uppercase leading-none mb-3",children:"Presence Log"}),(0,r.jsx)("p",{className:"text-zinc-400 font-black uppercase text-[10px] tracking-[0.4em]",children:"Historical performance audit trail"})]}),(0,r.jsx)("div",{className:"flex gap-4",children:(0,r.jsxs)("button",{onClick:h,className:"flex items-center justify-center gap-3 px-6 py-4 bg-white border-2 border-zinc-100 rounded-2xl text-black font-black text-[10px] uppercase tracking-widest hover:bg-zinc-50 transition-all shadow-sm",children:[(0,r.jsx)(n.A,{size:18})," Sync History"]})})]}),(0,r.jsxs)(d.Zp,{className:"!p-0 overflow-hidden shadow-2xl border border-zinc-100",children:[(0,r.jsxs)("div",{className:"p-10 border-b border-zinc-100 flex items-center justify-between bg-zinc-50/20",children:[(0,r.jsx)(d.X3,{title:"Operational Timeline",subtitle:"Verified Presence Entries",icon:i.A}),(0,r.jsxs)("div",{className:"flex items-center gap-3 text-[10px] font-black text-black uppercase tracking-[0.2em]",children:[(0,r.jsx)("span",{className:"text-zinc-400",children:"Records Found:"})," ",t.length]})]}),(0,r.jsx)("div",{className:"divide-y divide-zinc-100",children:t.map(e=>{let t=p(e.date),s=e.is_late,a="P"===e.status||"L"===e.status;return(0,r.jsxs)("div",{className:"p-10 flex flex-col md:flex-row md:items-center justify-between hover:bg-zinc-50/50 transition-all cursor-pointer group gap-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-8",children:[(0,r.jsxs)("div",{className:"w-16 h-16 rounded-[1.5rem] flex flex-col items-center justify-center font-black transition-transform group-hover:scale-105 border-2 ".concat(s?"bg-amber-50 text-amber-600 border-amber-100":a?"bg-black text-white border-black":"bg-zinc-100 text-zinc-400 border-zinc-200"),children:[(0,r.jsx)("span",{className:"text-[10px] uppercase opacity-60 mb-1",children:t.month}),(0,r.jsx)("span",{className:"text-2xl leading-none",children:t.day})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-black text-black text-xl tracking-tighter uppercase leading-none mb-2",children:t.full}),(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-[10px] font-black text-zinc-400 uppercase tracking-widest",children:[(0,r.jsx)(c,{size:12,className:"text-black"})," In: ",(0,r.jsx)("span",{className:"text-black",children:b(e.check_in)})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-[10px] font-black text-zinc-400 uppercase tracking-widest",children:[(0,r.jsx)(c,{size:12,className:"text-zinc-400 rotate-180"})," Out: ",(0,r.jsx)("span",{className:"text-black",children:b(e.check_out)})]})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between md:justify-end gap-10 w-full md:w-auto pt-4 md:pt-0 border-t md:border-t-0 border-zinc-50",children:[(0,r.jsx)("div",{className:"text-left md:text-right",children:(0,r.jsx)(d.Ex,{variant:s?"amber":a?"black":"rose",children:s?"LATE ARRIVAL":a?"OPTIMAL":"ABSENCE"})}),(0,r.jsx)(o.A,{size:20,className:"text-zinc-200 group-hover:text-black transition-all group-hover:translate-x-2"})]})]},e._id)})})]})]})}},1925:(e,t,s)=>{"use strict";s.d(t,{Ex:()=>n,X3:()=>i,Zp:()=>l,aF:()=>o,jn:()=>c,l6:()=>x,pd:()=>d});var r=s(5155);s(2115);var a=s(767);let l=e=>{let{children:t,className:s=""}=e;return(0,r.jsx)("div",{className:"bg-white rounded-[1.5rem] sm:rounded-[2.5rem] p-5 sm:p-8 shadow-sm border border-slate-100 transition-all duration-300 hover:shadow-xl hover:shadow-slate-200/40 ".concat(s),children:t})},n=e=>{let{children:t,variant:s="slate"}=e;return(0,r.jsx)("span",{className:"px-2 sm:px-3 py-1 rounded-lg sm:rounded-xl text-[9px] sm:text-[10px] font-black uppercase tracking-wider border whitespace-nowrap ".concat({indigo:"bg-indigo-50 text-indigo-600 border-indigo-100",emerald:"bg-emerald-50 text-emerald-600 border-emerald-100",rose:"bg-rose-50 text-rose-600 border-rose-100",amber:"bg-amber-50 text-amber-600 border-amber-100",slate:"bg-slate-50 text-slate-500 border-slate-100",black:"bg-black text-white border-black"}[s]),children:t})},i=e=>{let{title:t,subtitle:s,icon:a,iconColor:l="text-black"}=e;return(0,r.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4 mb-6 sm:mb-8",children:[a&&(0,r.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center ".concat(l," border border-slate-200 shadow-sm flex-shrink-0"),children:(0,r.jsx)(a,{size:20,className:"sm:w-[22px] sm:h-[22px]"})}),(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsx)("h3",{className:"text-lg sm:text-xl font-black text-black tracking-tight leading-none mb-1 truncate",children:t}),s&&(0,r.jsx)("p",{className:"text-[9px] sm:text-[10px] font-black text-slate-400 uppercase tracking-widest truncate",children:s})]})]})},c=e=>{let{onClick:t,children:s,icon:a,className:l="",disabled:n,type:i="button"}=e;return(0,r.jsxs)("button",{type:i,onClick:t,disabled:n,className:"w-full sm:w-auto px-6 sm:px-8 py-3.5 sm:py-4 bg-black text-white rounded-xl sm:rounded-2xl font-black text-[10px] sm:text-xs uppercase tracking-widest flex items-center justify-center gap-2 shadow-xl shadow-slate-200 hover:bg-zinc-800 transition-all active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed ".concat(l),children:[a&&(0,r.jsx)(a,{size:16,className:"sm:w-[18px] sm:h-[18px]"}),s]})},o=e=>{let{isOpen:t,onClose:s,title:l,children:n}=e;return t?(0,r.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center p-0 sm:p-4",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:s}),(0,r.jsxs)("div",{className:"relative bg-white rounded-t-[2rem] sm:rounded-[3rem] w-full max-w-4xl h-[92vh] sm:h-auto sm:max-h-[90vh] overflow-hidden shadow-2xl animate-in slide-in-from-bottom-10 sm:zoom-in-95 duration-300",children:[(0,r.jsxs)("div",{className:"p-6 sm:p-8 border-b border-slate-100 flex items-center justify-between bg-white",children:[(0,r.jsx)("h3",{className:"text-xl sm:text-2xl font-black text-black tracking-tight",children:l}),(0,r.jsx)("button",{onClick:s,className:"p-2 sm:p-3 hover:bg-slate-100 rounded-xl sm:rounded-2xl transition-colors text-slate-400",children:(0,r.jsx)(a.A,{size:24})})]}),(0,r.jsx)("div",{className:"p-6 sm:p-8 overflow-y-auto max-h-[calc(92vh-100px)] sm:max-h-[calc(90vh-140px)]",children:n})]})]}):null},d=e=>{let{label:t,icon:s,...a}=e;return(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)("label",{className:"text-[9px] sm:text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:t}),(0,r.jsxs)("div",{className:"relative group",children:[s&&(0,r.jsx)(s,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within:text-black transition-colors",size:18}),(0,r.jsx)("input",{...a,className:"w-full ".concat(s?"pl-11":"px-5"," pr-4 py-3 sm:py-3.5 bg-white border border-slate-200 rounded-xl sm:rounded-2xl focus:ring-4 focus:ring-slate-500/10 focus:border-black outline-none transition-all font-medium text-black text-sm sm:text-base")})]})]})},x=e=>{let{label:t,options:s,...a}=e;return(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)("label",{className:"text-[9px] sm:text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:t}),(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("select",{...a,className:"w-full px-5 py-3 sm:py-3.5 bg-white border border-slate-200 rounded-xl sm:rounded-2xl focus:ring-4 focus:ring-slate-500/10 focus:border-black outline-none transition-all font-medium text-black text-sm sm:text-base appearance-none",children:s.map(e=>(0,r.jsx)("option",{value:e,children:e},e))}),(0,r.jsx)("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400 group-focus-within:text-black transition-colors",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]})}},2423:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(7401).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},4505:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(7401).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},4834:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(7401).A)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]])},5459:(e,t,s)=>{"use strict";s.d(t,{A:()=>o,AuthProvider:()=>c});var r=s(5155),a=s(2115),l=s(6046),n=s(2110);let i=(0,a.createContext)(void 0),c=e=>{let{children:t}=e,[s,c]=(0,a.useState)(null),[o,d]=(0,a.useState)(!0),x=(0,l.useRouter)(),m=async()=>{try{let e=await fetch("/api/auth/me"),t=await e.json();t.user?c(t.user):c(null)}catch(e){console.error("Check user error:",e),c(null)}finally{d(!1)}};(0,a.useEffect)(()=>{m()},[]);let u=async()=>{await m()},h=async e=>{try{let t=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json();if(t.ok)return{error:null};return{error:s.error||"Signup failed"}}catch(e){return{error:e.message}}},p=async(e,t)=>{try{let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),r=await s.json();if(s.ok)return c(r.user),{error:null};return{error:r.error||"Login failed"}}catch(e){return{error:e.message}}},b=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),c(null),n.oR.info("Session Terminated. Offline."),x.push("/")}catch(e){console.error("Sign out error:",e)}};return(0,r.jsx)(i.Provider,{value:{user:s,loading:o,signUp:h,signIn:p,signOut:b,refreshUser:u},children:t})},o=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6046:(e,t,s)=>{"use strict";var r=s(6658);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},6967:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(7401).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},7169:(e,t,s)=>{Promise.resolve().then(s.bind(s,1600))},7401:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var r=s(2115);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,r.forwardRef)((e,t)=>{let{color:s="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:x,...m}=e;return(0,r.createElement)("svg",{ref:t,...n,width:a,height:a,stroke:s,strokeWidth:c?24*Number(i)/Number(a):i,className:l("lucide",o),...m},[...x.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let s=(0,r.forwardRef)((s,n)=>{let{className:c,...o}=s;return(0,r.createElement)(i,{ref:n,iconNode:t,className:l("lucide-".concat(a(e)),c),...o})});return s.displayName="".concat(e),s}}},e=>{var t=t=>e(e.s=t);e.O(0,[110,441,587,358],()=>t(7169)),_N_E=e.O()}]);