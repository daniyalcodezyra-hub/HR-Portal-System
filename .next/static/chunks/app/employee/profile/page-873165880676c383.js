(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[989],{767:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(7401).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},1466:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(7401).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},3580:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(7401).A)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},3831:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(7401).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},4839:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(7401).A)("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},5459:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,AuthProvider:()=>o});var l=a(5155),r=a(2115),i=a(6046),s=a(2110);let n=(0,r.createContext)(void 0),o=e=>{let{children:t}=e,[a,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(!0),u=(0,i.useRouter)(),h=async()=>{try{let e=await fetch("/api/auth/me"),t=await e.json();t.user?o(t.user):o(null)}catch(e){console.error("Check user error:",e),o(null)}finally{d(!1)}};(0,r.useEffect)(()=>{h()},[]);let p=async()=>{await h()},m=async e=>{try{let t=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();if(t.ok)return{error:null};return{error:a.error||"Signup failed"}}catch(e){return{error:e.message}}},x=async(e,t)=>{try{let a=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),l=await a.json();if(a.ok)return o(l.user),{error:null};return{error:l.error||"Login failed"}}catch(e){return{error:e.message}}},f=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),o(null),s.oR.info("Session Terminated. Offline."),u.push("/")}catch(e){console.error("Sign out error:",e)}};return(0,l.jsx)(n.Provider,{value:{user:a,loading:c,signUp:m,signIn:x,signOut:f,refreshUser:p},children:t})},c=()=>{let e=(0,r.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6046:(e,t,a)=>{"use strict";var l=a(6658);a.o(l,"usePathname")&&a.d(t,{usePathname:function(){return l.usePathname}}),a.o(l,"useRouter")&&a.d(t,{useRouter:function(){return l.useRouter}})},6462:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(7401).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},6889:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(7401).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},7184:(e,t,a)=>{Promise.resolve().then(a.bind(a,9853))},7401:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var l=a(2115);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,l.forwardRef)((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:u,...h}=e;return(0,l.createElement)("svg",{ref:t,...s,width:r,height:r,stroke:a,strokeWidth:o?24*Number(n)/Number(r):n,className:i("lucide",c),...h},[...u.map(e=>{let[t,a]=e;return(0,l.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let a=(0,l.forwardRef)((a,s)=>{let{className:o,...c}=a;return(0,l.createElement)(n,{ref:s,iconNode:t,className:i("lucide-".concat(r(e)),o),...c})});return a.displayName="".concat(e),a}},7780:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(7401).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},9853:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var l=a(5155),r=a(2115),i=a(1466),s=a(6462),n=a(3831),o=a(4839),c=a(6889),d=a(7401);let u=(0,d.A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),h=(0,d.A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var p=a(767),m=a(7780),x=a(3580),f=a(5459),b=a(2110);let v=()=>{var e,t,a;let{user:d,refreshUser:v}=(0,f.A)(),[g,y]=(0,r.useState)(!1),[k,w]=(0,r.useState)(!1),[j,A]=(0,r.useState)({});(0,r.useEffect)(()=>{d&&A({...d})},[d]);let N=async()=>{y(!0);try{(await fetch("/api/users",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:null==d?void 0:d._id,updates:{full_name:j.full_name,phone:j.phone}})})).ok?(b.oR.success("Profile updated"),await v(),w(!1)):b.oR.error("Update failed")}catch(e){b.oR.error("Process error")}finally{y(!1)}};if(!d&&!g)return null;let z=[{title:"Personal Identity",items:[{label:"Legal Name",value:null==d?void 0:d.full_name,icon:(0,l.jsx)(i.A,{size:16}),field:"full_name",editable:!0},{label:"Official Email",value:null==d?void 0:d.email,icon:(0,l.jsx)(s.A,{size:16}),field:"email",editable:!1},{label:"Contact Number",value:(null==d?void 0:d.phone)||"Not provided",icon:(0,l.jsx)(n.A,{size:16}),field:"phone",editable:!0}]},{title:"Operational Detail",items:[{label:"Role Designation",value:(null==d?void 0:null===(e=d.role)||void 0===e?void 0:e.toUpperCase())||"UNASSIGNED",icon:(0,l.jsx)(o.A,{size:16}),field:"role",editable:!1},{label:"Assigned Shift",value:(null==d?void 0:d.shift)||"GENERAL",icon:(0,l.jsx)(c.A,{size:16}),field:"shift",editable:!1},{label:"Position",value:(null==d?void 0:d.position)||"GENERAL",icon:(0,l.jsx)(u,{size:16}),field:"position",editable:!1},{label:"System ID",value:(null==d?void 0:null===(t=d._id)||void 0===t?void 0:t.substring(0,16).toUpperCase())+"...",icon:(0,l.jsx)(h,{size:16}),field:"id",editable:!1}]}];return(0,l.jsxs)("div",{className:"space-y-12 pb-10",children:[(0,l.jsxs)("div",{className:"bg-black rounded-[3rem] p-10 sm:p-20 text-white shadow-2xl relative overflow-hidden group border border-zinc-800",children:[(0,l.jsx)("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-zinc-900 rounded-full blur-[150px] -mr-64 -mt-64"}),k?(0,l.jsxs)("div",{className:"absolute top-10 right-10 flex gap-3 z-20",children:[(0,l.jsx)("button",{onClick:()=>w(!1),className:"p-4 bg-zinc-800 text-white rounded-full hover:bg-zinc-700 transition-all",children:(0,l.jsx)(p.A,{size:20})}),(0,l.jsxs)("button",{onClick:N,className:"p-4 bg-white text-black rounded-full hover:bg-zinc-200 transition-all flex items-center gap-2 px-6",children:[(0,l.jsx)(m.A,{size:20})," ",(0,l.jsx)("span",{className:"text-[10px] font-black uppercase",children:"Commit"})]})]}):(0,l.jsx)("button",{onClick:()=>w(!0),className:"absolute top-10 right-10 p-5 bg-white text-black rounded-full hover:bg-zinc-200 transition-all shadow-2xl z-20",children:(0,l.jsx)(x.A,{size:20})}),(0,l.jsxs)("div",{className:"flex flex-col items-center sm:flex-row sm:items-end gap-14 relative z-10",children:[(0,l.jsx)("div",{className:"w-40 h-40 sm:w-56 sm:h-56 rounded-[3rem] border-4 border-zinc-800 shadow-2xl overflow-hidden bg-zinc-900 flex items-center justify-center text-6xl font-black",children:(null==d?void 0:null===(a=d.full_name)||void 0===a?void 0:a.split(" ").map(e=>e[0]).join(""))||"?"}),(0,l.jsxs)("div",{className:"text-center sm:text-left",children:[(0,l.jsx)("h1",{className:"text-4xl sm:text-6xl font-black text-white tracking-tighter uppercase leading-none mb-4",children:null==d?void 0:d.full_name}),(0,l.jsx)("p",{className:"text-zinc-500 font-black uppercase tracking-[0.4em] text-[10px] mb-10 opacity-80",children:"Operational Unit Member"})]})]})]}),(0,l.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:z.map((e,t)=>(0,l.jsxs)("div",{className:"bg-white rounded-[3rem] p-10 sm:p-16 shadow-sm border border-zinc-100",children:[(0,l.jsx)("h3",{className:"text-2xl font-black text-black uppercase tracking-tighter mb-10 flex items-center gap-4",children:e.title}),(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-10",children:e.items.map((e,t)=>(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("p",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest flex items-center gap-3",children:[e.icon," ",e.label]}),k&&e.editable?(0,l.jsx)("input",{type:"text",className:"w-full bg-zinc-50 border-2 border-zinc-100 rounded-xl px-4 py-2 text-sm font-black text-black outline-none focus:border-black transition-all",value:j[e.field]||"",onChange:t=>A({...j,[e.field]:t.target.value})}):(0,l.jsx)("p",{className:"text-sm font-black text-black uppercase truncate tracking-tight",children:e.value||"NOT SPECIFIED"})]},t))})]},t))})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[110,441,587,358],()=>t(7184)),_N_E=e.O()}]);