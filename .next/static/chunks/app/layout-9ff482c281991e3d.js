(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{5459:(e,r,t)=>{"use strict";t.d(r,{A:()=>l,AuthProvider:()=>u});var n=t(5155),o=t(2115),a=t(6046),s=t(2110);let i=(0,o.createContext)(void 0),u=e=>{let{children:r}=e,[t,u]=(0,o.useState)(null),[l,h]=(0,o.useState)(!0),c=(0,a.useRouter)(),d=async()=>{try{let e=await fetch("/api/auth/me"),r=await e.json();r.user?u(r.user):u(null)}catch(e){console.error("Check user error:",e),u(null)}finally{h(!1)}};(0,o.useEffect)(()=>{d()},[]);let f=async()=>{await d()},m=async e=>{try{let r=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await r.json();if(r.ok)return{error:null};return{error:t.error||"Signup failed"}}catch(e){return{error:e.message}}},y=async(e,r)=>{try{let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})}),n=await t.json();if(t.ok)return u(n.user),{error:null};return{error:n.error||"Login failed"}}catch(e){return{error:e.message}}},p=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),u(null),s.oR.info("Session Terminated. Offline."),c.push("/")}catch(e){console.error("Sign out error:",e)}};return(0,n.jsx)(i.Provider,{value:{user:t,loading:l,signUp:m,signIn:y,signOut:p,refreshUser:f},children:r})},l=()=>{let e=(0,o.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5704:(e,r,t)=>{Promise.resolve().then(t.bind(t,5459)),Promise.resolve().then(t.t.bind(t,9840,23)),Promise.resolve().then(t.t.bind(t,9324,23)),Promise.resolve().then(t.bind(t,2110)),Promise.resolve().then(t.t.bind(t,5716,23))},5716:()=>{},6046:(e,r,t)=>{"use strict";var n=t(6658);t.o(n,"usePathname")&&t.d(r,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}})},9324:()=>{},9840:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_f367f3"}}},e=>{var r=r=>e(e.s=r);e.O(0,[829,110,441,587,358],()=>r(5704)),_N_E=e.O()}]);