(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{738:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(7401).A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},1982:(e,t,r)=>{Promise.resolve().then(r.bind(r,3267))},2598:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(7401).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3267:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var a=r(5155),s=r(2115),l=r(6046),n=r(8173),i=r.n(n),o=r(5459),c=r(2110),d=r(738),u=r(2598);let m=e=>{let{onSuccess:t}=e,r=(0,l.useRouter)(),{signIn:n,user:m}=(0,o.A)(),[p,h]=(0,s.useState)(!1),[x,f]=(0,s.useState)({email:"",password:""}),[g,b]=(0,s.useState)({}),[w,y]=(0,s.useState)(!1),k=()=>{let e={};return x.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(x.email)||(e.email="Please enter a valid email address"):e.email="Email is required",x.password||(e.password="Password is required"),b(e),0===Object.keys(e).length},j=e=>{let{name:t,value:r}=e.target;f(e=>({...e,[t]:r})),g[t]&&b(e=>({...e,[t]:void 0}))},v=async e=>{if(e.preventDefault(),k()){y(!0),b({});try{let{error:e}=await n(x.email,x.password);if(console.log("Login Attempt:",{email:x.email,error:e}),e){let t="string"==typeof e?e:e.message||"Invalid email or password";b({general:t}),c.oR.error(t),y(!1);return}c.oR.success("Access Granted! Redirecting..."),y(!1),t&&t()}catch(e){b({general:"An unexpected error occurred. Please try again."}),y(!1)}}};return s.useEffect(()=>{m&&!w&&("admin"===m.role?r.push("/admin"):r.push("/employee"))},[m,w,r]),(0,a.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[g.general&&(0,a.jsxs)("div",{className:"bg-rose-50 border border-rose-100 p-4 rounded-2xl flex items-center gap-3 animate-shake",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-rose-500 rounded-full flex items-center justify-center text-white shrink-0 shadow-lg shadow-rose-200",children:(0,a.jsx)("span",{className:"font-black text-xs",children:"!"})}),(0,a.jsx)("p",{className:"text-[10px] font-bold text-rose-600 uppercase tracking-widest leading-tight",children:g.general})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-zinc-400 ml-2",htmlFor:"email",children:"Personnel Email"}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("input",{type:"email",id:"email",name:"email",value:x.email,onChange:j,placeholder:"username@codezyra.com",disabled:w,className:"w-full bg-white border ".concat(g.email?"border-rose-300 ring-4 ring-rose-50":"border-slate-100 group-hover:border-black"," px-6 py-4 rounded-2xl font-bold text-sm outline-none transition-all placeholder:text-zinc-300 placeholder:italic"),autoComplete:"email"}),g.email&&(0,a.jsx)("p",{className:"text-[9px] font-black text-rose-500 uppercase tracking-widest mt-2 ml-2",children:g.email})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-zinc-400 ml-2",htmlFor:"password",children:"Access Key"}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("input",{type:p?"text":"password",id:"password",name:"password",value:x.password,onChange:j,placeholder:"••••••••••••",disabled:w,className:"w-full bg-white border ".concat(g.password?"border-rose-300 ring-4 ring-rose-50":"border-slate-100 group-hover:border-black"," px-6 py-4 rounded-2xl font-bold text-sm outline-none transition-all placeholder:text-zinc-300"),autoComplete:"current-password"}),(0,a.jsx)("button",{type:"button",onClick:()=>h(!p),className:"absolute right-5 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-black transition-colors",children:p?(0,a.jsx)(d.A,{size:20}):(0,a.jsx)(u.A,{size:20})}),g.password&&(0,a.jsx)("p",{className:"text-[9px] font-black text-rose-500 uppercase tracking-widest mt-2 ml-2",children:g.password})]})]}),(0,a.jsx)("button",{type:"submit",disabled:w,className:"w-full bg-black text-white py-5 rounded-2xl font-black text-[11px] uppercase tracking-[0.3em] shadow-2xl shadow-zinc-200 hover:scale-[1.02] active:scale-95 transition-all flex items-center justify-center gap-3 disabled:bg-zinc-800 disabled:grayscale",children:w?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white/20 border-t-white rounded-full animate-spin"}),"Authenticating..."]}):(0,a.jsx)(a.Fragment,{children:"Login"})}),(0,a.jsx)("div",{className:"pt-6 border-t border-slate-50 text-center",children:(0,a.jsxs)("p",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:["New Personnel? "," ",(0,a.jsx)(i(),{href:"/signup",className:"text-black font-black hover:underline underline-offset-4",children:"Signup"})]})})]})},p=(0,r(7401).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);function h(){return(0,a.jsx)("main",{className:"min-h-screen bg-white flex flex-col items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"w-full max-w-md",children:[(0,a.jsxs)(i(),{href:"/",className:"inline-flex items-center text-[10px] font-black uppercase tracking-widest text-zinc-400 hover:text-black transition-colors mb-8 group",children:[(0,a.jsx)(p,{size:16,className:"mr-2 group-hover:-translate-x-1 transition-transform"}),"Back to Terminal"]}),(0,a.jsxs)("div",{className:"mb-12",children:[(0,a.jsx)("h1",{className:"text-4xl font-black uppercase tracking-tight mb-2",children:"Login"}),(0,a.jsx)("p",{className:"text-zinc-400 font-bold text-[10px] uppercase tracking-[0.2em]",children:"Authorization Required // Personnel Only"})]}),(0,a.jsx)("div",{className:"bg-zinc-50 p-8 rounded-[2.5rem] border border-slate-100 shadow-2xl shadow-zinc-200/50",children:(0,a.jsx)(m,{})}),(0,a.jsx)("p",{className:"mt-12 text-center text-[9px] font-bold text-zinc-400 uppercase tracking-widest leading-relaxed px-8",children:"Authorized access is monitored and logged. Unauthorized attempts will be reported to the IT security department immediately."})]})})}},5459:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>o});var a=r(5155),s=r(2115),l=r(6046),n=r(2110);let i=(0,s.createContext)(void 0),o=e=>{let{children:t}=e,[r,o]=(0,s.useState)(null),[c,d]=(0,s.useState)(!0),u=(0,l.useRouter)(),m=async()=>{try{let e=await fetch("/api/auth/me"),t=await e.json();t.user?o(t.user):o(null)}catch(e){console.error("Check user error:",e),o(null)}finally{d(!1)}};(0,s.useEffect)(()=>{m()},[]);let p=async()=>{await m()},h=async e=>{try{let t=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(t.ok)return{error:null};return{error:r.error||"Signup failed"}}catch(e){return{error:e.message}}},x=async(e,t)=>{try{let r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),a=await r.json();if(r.ok)return o(a.user),{error:null};return{error:a.error||"Login failed"}}catch(e){return{error:e.message}}},f=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),o(null),n.oR.info("Session Terminated. Offline."),u.push("/")}catch(e){console.error("Sign out error:",e)}};return(0,a.jsx)(i.Provider,{value:{user:r,loading:c,signUp:h,signIn:x,signOut:f,refreshUser:p},children:t})},c=()=>{let e=(0,s.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6046:(e,t,r)=>{"use strict";var a=r(6658);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},7401:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:t,...n,width:s,height:s,stroke:r,strokeWidth:o?24*Number(i)/Number(s):i,className:l("lucide",c),...m},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let r=(0,a.forwardRef)((r,n)=>{let{className:o,...c}=r;return(0,a.createElement)(i,{ref:n,iconNode:t,className:l("lucide-".concat(s(e)),o),...c})});return r.displayName="".concat(e),r}}},e=>{var t=t=>e(e.s=t);e.O(0,[110,441,587,358],()=>t(1982)),_N_E=e.O()}]);